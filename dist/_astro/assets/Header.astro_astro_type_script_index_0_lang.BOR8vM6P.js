document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("menu-toggle"),a=document.getElementById("nav-menu");l&&a&&(l.addEventListener("click",()=>{a.classList.toggle("active");const t=l.querySelector("i");t&&(a.classList.contains("active")?(t.classList.remove("fa-bars"),t.classList.add("fa-times")):(t.classList.remove("fa-times"),t.classList.add("fa-bars")))}),a.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{a.classList.remove("active");const s=l.querySelector("i");s&&(s.classList.remove("fa-times"),s.classList.add("fa-bars"))})}));const r=document.querySelectorAll(".nav-link");function d(){const e=window.location.pathname;let t="inicio";e==="/"?t="inicio":e.startsWith("/servicios")?t="servicios":e.startsWith("/quienes-somos")?t="quienes-somos":e.startsWith("/faq")?t="faq":e.startsWith("/trabaja-con-nosotros")&&(t="trabaja-con-nosotros"),r.forEach(s=>{s.classList.remove("active"),s.getAttribute("data-section")===t&&s.classList.add("active")})}function u(){const e=document.querySelector("header");e&&(window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled"))}function m(e){const t=document.querySelector(`#${e}`);if(t){const s=t.offsetTop;window.scrollTo({top:s,behavior:"smooth"})}}let f=0,v;function h(){const e=window.scrollY,t=e>f?"down":"up",s=Math.abs(e-f);s>30&&(clearTimeout(v),v=setTimeout(()=>{const c=document.querySelectorAll("section[id]"),n=e+50;let i=null;if(t==="down"){for(let o=0;o<c.length;o++)if(c[o].offsetTop>n){i=c[o];break}}else for(let o=c.length-1;o>=0;o--)if(c[o].offsetTop<n){i=c[o];break}if(i&&s>50){const o=i.getAttribute("id");m(o)}},100)),f=e}function L(){const e=document.querySelectorAll(".scroll-dot"),t=window.scrollY+100;e.forEach(s=>{const c=s.getAttribute("data-section"),n=document.querySelector(`#${c}`);if(n){const i=n.offsetTop,o=i+n.offsetHeight;t>=i&&t<o?s.classList.add("active"):s.classList.remove("active")}})}document.addEventListener("click",e=>{if(e.target.classList.contains("scroll-dot")){const t=e.target.getAttribute("data-section");m(t)}}),window.addEventListener("scroll",()=>{u(),h(),L()}),window.addEventListener("popstate",()=>{d()}),d(),u(),L(),r.forEach(e=>{e.addEventListener("click",()=>{r.forEach(t=>t.classList.remove("active")),e.classList.add("active"),setTimeout(()=>{d()},100)})})});
