import d from"./index.DURTWwV8.js";const a={SERVICE_ID:"service_fzy350f",TEMPLATE_ID_SERVICIOS:"template_2ba7wlj",TEMPLATE_ID_TRABAJA:"template_gxl2hcj",PUBLIC_KEY:"Q5Qu6LefKc48raJFh"};function y(){return!0}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("postulacionForm");e&&e.addEventListener("submit",async function(t){t.preventDefault();const r=e.querySelector(".submit-btn"),u=r.innerHTML;r.innerHTML='<span class="btn-text">Enviando...</span><span class="btn-icon">⏳</span>',r.disabled=!0;try{const n={nombre:e.querySelector('[name="nombre"]').value,email:e.querySelector('[name="email"]').value,telefono:e.querySelector('[name="telefono"]').value||"No proporcionado",ciudad:e.querySelector('[name="ciudad"]').value,especialidad:e.querySelector('[name="especialidad"]').value,experiencia:e.querySelector('[name="experiencia"]').value,motivacion:e.querySelector('[name="motivacion"]').value,aportes:e.querySelector('[name="aportes"]').value,carta:e.querySelector('[name="carta"]').value||"Sin carta de presentación",time:new Date().toLocaleString("es-CL",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};if(!y())throw new Error("Configuración de EmailJS incompleta");if((await d.send(a.SERVICE_ID,a.TEMPLATE_ID_TRABAJA,n,a.PUBLIC_KEY)).status===200)alert("¡Gracias por tu postulación! Hemos recibido tu información y nos pondremos en contacto contigo pronto."),e.reset(),e.querySelectorAll("input, select, textarea").forEach(m=>{m.style.borderColor="rgba(202, 1, 1, 0.1)"});else throw new Error("Error en el envío")}catch(n){console.error("Error al enviar el formulario:",n),alert("Hubo un error al enviar tu postulación. Por favor, intenta nuevamente.")}finally{r.innerHTML=u,r.disabled=!1}});const l=e.querySelectorAll("[required]");function s(t){return/^[a-zA-ZÀ-ÿ\u00f1\u00d1\s]+$/.test(t.trim())&&t.trim().length>=2}function c(t){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.trim())}const o=e.querySelector('[name="nombre"]'),i=e.querySelector('[name="email"]');e.querySelector('[name="telefono"]'),e.querySelector('[name="cv"]'),o&&(o.addEventListener("blur",function(){s(this.value)?(this.style.borderColor="rgba(202, 1, 1, 0.1)",this.setCustomValidity("")):(this.style.borderColor="#E30613",this.setCustomValidity("El nombre solo puede contener letras y espacios, mínimo 2 caracteres"))}),o.addEventListener("input",function(){this.value=this.value.replace(/[0-9]/g,"")})),i&&i.addEventListener("blur",function(){c(this.value)?(this.style.borderColor="rgba(202, 1, 1, 0.1)",this.setCustomValidity("")):(this.style.borderColor="#E30613",this.setCustomValidity("Ingresa un correo electrónico válido"))}),l.forEach(t=>{!t.name||["nombre","email","telefono","cv"].includes(t.name)||t.addEventListener("blur",function(){this.value.trim()?(this.style.borderColor="rgba(202, 1, 1, 0.1)",this.setCustomValidity("")):(this.style.borderColor="#E30613",this.setCustomValidity("Este campo es obligatorio"))})})});
