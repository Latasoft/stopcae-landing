document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("menu-toggle"),r=document.getElementById("nav-menu");l&&r&&(l.addEventListener("click",()=>{r.classList.toggle("active");const e=l.querySelector("i");e&&(r.classList.contains("active")?(e.classList.remove("fa-bars"),e.classList.add("fa-times")):(e.classList.remove("fa-times"),e.classList.add("fa-bars")))}),r.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{r.classList.remove("active");const t=l.querySelector("i");t&&(t.classList.remove("fa-times"),t.classList.add("fa-bars"))})}));const o=document.querySelector(".dropdown-container"),m=document.querySelector(".dropdown-toggle");o&&m&&(o.addEventListener("mouseenter",()=>{window.innerWidth>768&&o.classList.add("active")}),o.addEventListener("mouseleave",()=>{window.innerWidth>768&&o.classList.remove("active")}),m.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),o.classList.toggle("active"),window.innerWidth<=768){const t=document.getElementById("nav-menu");t&&(t.classList.add("active"),o.classList.contains("active")?t.classList.add("dropdown-expanded"):t.classList.remove("dropdown-expanded"))}}),document.addEventListener("click",e=>{if(!o.contains(e.target)&&o.classList.contains("active")){o.classList.remove("active");const t=document.getElementById("nav-menu");t&&t.classList.remove("dropdown-expanded")}}),o.querySelectorAll(".dropdown-link").forEach(e=>{e.addEventListener("click",()=>{o.classList.remove("active");const t=document.getElementById("nav-menu");if(t&&t.classList.remove("dropdown-expanded"),window.innerWidth<=768){const i=document.getElementById("menu-toggle");if(t&&t.classList.remove("active"),i){const c=i.querySelector("i");c&&(c.classList.remove("fa-times"),c.classList.add("fa-bars"))}}})}),window.addEventListener("resize",()=>{window.innerWidth>768&&o.classList.remove("active")}),o.addEventListener("click",e=>{e.stopPropagation()}));const d=document.querySelectorAll(".nav-link");function f(){const s=window.location.pathname;let e="inicio";s==="/"?e="inicio":s.startsWith("/servicios")?e="servicios":s.startsWith("/quienes-somos")?e="quienes-somos":s.startsWith("/faq")?e="faq":s.startsWith("/trabaja-con-nosotros")&&(e="trabaja-con-nosotros"),d.forEach(t=>{t.classList.remove("active"),t.getAttribute("data-section")===e&&t.classList.add("active")})}function v(){const s=document.querySelector("header");s&&(window.scrollY>100?s.classList.add("scrolled"):s.classList.remove("scrolled"))}function L(s){const e=document.querySelector(`#${s}`);if(e){const t=e.offsetTop;window.scrollTo({top:t,behavior:"smooth"})}}let u=0,w;function p(){const s=window.scrollY,e=s>u?"down":"up",t=Math.abs(s-u);t>30&&(clearTimeout(w),w=setTimeout(()=>{const i=document.querySelectorAll("section[id]"),c=s+50;let a=null;if(e==="down"){for(let n=0;n<i.length;n++)if(i[n].offsetTop>c){a=i[n];break}}else for(let n=i.length-1;n>=0;n--)if(i[n].offsetTop<c){a=i[n];break}if(a&&t>50){const n=a.getAttribute("id");L(n)}},100)),u=s}function g(){const s=document.querySelectorAll(".scroll-dot"),e=window.scrollY+100;s.forEach(t=>{const i=t.getAttribute("data-section"),c=document.querySelector(`#${i}`);if(c){const a=c.offsetTop,n=a+c.offsetHeight;e>=a&&e<n?t.classList.add("active"):t.classList.remove("active")}})}document.addEventListener("click",s=>{if(s.target.classList.contains("scroll-dot")){const e=s.target.getAttribute("data-section");L(e)}}),window.addEventListener("scroll",()=>{v(),p(),g()}),window.addEventListener("popstate",()=>{f()}),f(),v(),g(),d.forEach(s=>{s.addEventListener("click",()=>{d.forEach(e=>e.classList.remove("active")),s.classList.add("active"),setTimeout(()=>{f()},100)})})});
